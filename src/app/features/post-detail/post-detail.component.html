<div class="search-page">
  <div *ngIf="post && !loading" class="post-card">
    <div class="post-header">
      <a [routerLink]="['/profile', post.user.username]">
        <span class="username">{{ post.user.username }}</span>
      </a>
      <span class="post-date">{{ post.created_at | date:'short' }}</span>
    </div>


    <div *ngIf="!editingPost" class="post-content">
      <p>{{ post.content }}</p>
    </div>

    <div *ngIf="isPostAuthor() && !editingPost" class="post-actions">
      <button class="action-btn" (click)="startEditingPost()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>
  </div>

  <ul class="comments-list">
    <li *ngFor="let comment of comments" class="comment-item">
      <div class="comment-header">
        <a [routerLink]="['/profile', comment.user.username]">
          <span class="comment-username">{{ comment.user.username }}</span>
        </a>
        <span class="comment-date">{{ comment.created_at | date:'short' }}</span>
      </div>
      <div class="comment-content">
        <p>{{ comment.content }}</p>
      </div>
      <div class="comment-actions">
        <button
          *ngIf="comment.user.username === currentUsername || post.user.username === currentUsername"
          class="action-btn danger"
          (click)="deleteComment(comment.id)"
        >üóëÔ∏è</button>
      </div>
    </li>
  </ul>

  <div class="comment-form">
    <textarea
      [(ngModel)]="commentContent"
      placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."
      rows="3"
      draggable="false"
      (dragover)="preventDrag($event)"
      (drop)="preventDrag($event)"
    ></textarea>
    <button
      class="action-btn"
      (click)="submitComment()"
      [disabled]="!commentContent.trim()"
    >–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>
</div>

<div class="modal-overlay" *ngIf="editingPost" (click)="cancelEditingPost()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç</h3>
    <textarea [(ngModel)]="editedPostContent" rows="5"></textarea>
    <div class="modal-actions">
      <button class="action-btn" (click)="saveEditedPost()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button class="action-btn danger" (click)="deletePost()">–£–¥–∞–ª–∏—Ç—å</button>
      <button class="action-btn" (click)="cancelEditingPost()">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>